(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{b082:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("q-page",[e("transition",{attrs:{appear:"","appear-active-class":"animated bounceInDown"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"row q-col-gutter-md items-center"},[e("div",{staticClass:"col-auto"},[e("q-btn",{attrs:{round:"",color:"primary",icon:"mdi-chevron-left"},on:{click:function(i){t.$sound.tap(),t.$router.push("/")}}})],1),e("div",{staticClass:"col"},[e("q-input",{attrs:{label:t.$t("public.search")},on:{input:t.search},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-btn",{attrs:{flat:"",round:"",icon:"mdi-subdirectory-arrow-left"},on:{click:t.onDirect}})]},proxy:!0}]),model:{value:t.searchVal,callback:function(i){t.searchVal=i},expression:"searchVal"}})],1)]),e("div",{staticClass:"q-mt-md"},[t.fullList?e("q-infinite-scroll",{ref:"infiniteScroll",on:{load:t.load}},[t.list&&t.list.length>0?e("div",{staticClass:"row q-col-gutter-md"},t._l(t.list,(function(t){return e("div",{key:t.id,staticClass:"col-xs-12 col-sm-4 col-md-3"},[e("transition",{attrs:{appear:"","appear-active-class":"animated flipInY","leave-active-class":"animated flipOutY"}},[e("chart-card",{attrs:{info:t,official:!0}})],1)],1)})),0):t._e()]):t._e()],1),e("transition",{attrs:{appear:"","appear-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"text-center q-mt-md"},[e("q-spinner"),t._v("\n          "+t._s(t.$t("public.loading"))+"\n        ")],1)])],1)])],1)},a=[],l=(e("a434"),e("ddb0"),e("c973")),n=e.n(l),r=e("7c17"),c=e("1c16"),o={name:"Official",components:{ChartCard:r["a"]},data:function(){return{loading:!1,loadPerPull:20,list:[],fullList:null,searchList:null,searchVal:""}},computed:{keys:{get(){return""===this.searchVal?null:this.searchVal.split(" ")}}},methods:{load(t,i){this.loading=!0;let e=(t-1)*this.loadPerPull,s=this.loadPerPull,a=!1;e+s>=this.searchList.length-1&&(s=this.searchList.length-e,a=!0);const l=this.searchList.concat().splice(e,s);this.list=this.list.concat(l),this.loading=!1,i(a)},search(){this.$refs.infiniteScroll.stop(),this.list=[],this.searchList=[],this.keys&&0!==this.keys.length?this.fullList.forEach(t=>{let i=!0;for(const e in this.keys)this.deepSearch({id:t.id,title:t.title,artist:t.artist},this.keys[e])||(i=!1);i&&this.searchList.push(t)}):this.searchList=this.fullList.concat(),this.$refs.infiniteScroll.reset(),this.$refs.infiniteScroll.resume(),this.$refs.infiniteScroll.trigger()},deepSearch(t,i){if(!t)return!1;if("string"===typeof t&&t.toLowerCase().includes(i.toLowerCase()))return!0;if("number"===typeof t&&t===Number.parseInt(i))return!0;if("object"!==typeof t)return!1;for(const e in t)if(this.deepSearch(t[e],i))return!0},onDirect(){this.$q.dialog({title:this.$t("dialogs.directlyStart.title"),message:this.$t("dialogs.directlyStart.message"),prompt:{model:"",type:"number"},cancel:!0,persistent:!0}).onOk(t=>{this.$q.loading.show();try{this.$router.push("official/"+t)}catch(i){}finally{this.$q.loading.hide()}})}},mounted(){var t=this;return n()((function*(){t.search=Object(c["a"])(t.search,1500),t.loading=!0,t.fullList=yield t.$bestdori.getOfficialSongList(),t.searchList=t.fullList.concat(),t.loading=!1}))()}},h=o,d=e("2877"),u=e("9989"),f=e("9c40"),p=e("27f9"),m=e("ef35"),g=e("0d59"),v=e("eebe"),b=e.n(v),y=Object(d["a"])(h,s,a,!1,null,"1c405268",null);i["default"]=y.exports;b()(y,"components",{QPage:u["a"],QBtn:f["a"],QInput:p["a"],QInfiniteScroll:m["a"],QSpinner:g["a"]})}}]);